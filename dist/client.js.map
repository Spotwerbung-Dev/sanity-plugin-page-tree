{"version":3,"file":"client.js","sources":["../src/client.ts"],"sourcesContent":["import { SanityClient } from 'sanity';\n\nimport { getAllPageMetadata } from './helpers/page-tree';\nimport { getAllRawPageMetadataQuery } from './queries';\nimport { PageMetadata, PageTreeConfig } from './types';\n\nexport type { PageMetadata } from './types';\n\nexport type PageTreeClientOptions = {\n  config: PageTreeConfig;\n  client: SanityClient;\n};\n\nexport const createPageTreeClient = ({ config, client }: PageTreeClientOptions) => {\n  return new PageTreeClient(config, client);\n};\n\nclass PageTreeClient {\n  private readonly config: PageTreeConfig;\n  private readonly client: SanityClient;\n\n  constructor(config: PageTreeConfig, client: SanityClient) {\n    this.config = config;\n    this.client = client;\n  }\n\n  public async getAllPageMetadata(): Promise<PageMetadata[]> {\n    const rawPageMetadata = await this.client.fetch(getAllRawPageMetadataQuery(this.config));\n    return getAllPageMetadata(this.config, rawPageMetadata);\n  }\n}\n"],"names":["createPageTreeClient","_ref","config","client","PageTreeClient","constructor","__publicField","getAllPageMetadata","rawPageMetadata","fetch","getAllRawPageMetadataQuery"],"mappings":";;;;;;;;;;;;;;;;;AAaO,MAAMA,oBAAuB,GAAAC,IAAA,IAA+C;EAAA,IAA9C;IAAEC,MAAA;IAAQC;GAAoC,GAAAF,IAAA;EAC1E,OAAA,IAAIG,cAAe,CAAAF,MAAA,EAAQC,MAAM,CAAA;AAC1C,CAAA;AAEA,MAAMC,cAAe,CAAA;EAInBC,WAAAA,CAAYH,QAAwBC,MAAsB,EAAA;IAHzCG,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA;IACAA,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA;IAGf,IAAA,CAAKJ,MAAS,GAAAA,MAAA;IACd,IAAA,CAAKC,MAAS,GAAAA,MAAA;EAChB;EAEA,MAAaI,kBAA8CA,CAAA,EAAA;IACnD,MAAAC,eAAA,GAAkB,MAAM,IAAK,CAAAL,MAAA,CAAOM,MAAMC,gCAA2B,CAAA,IAAA,CAAKR,MAAM,CAAC,CAAA;IAChF,OAAAK,wBAAA,CAAmB,IAAK,CAAAL,MAAA,EAAQM,eAAe,CAAA;EACxD;AACF;"}